# SecureNotes Console App

A simple yet secure command-line application for creating, managing, and storing encrypted notes. All notes are stored locally as individual JSON files within a `vault` directory, with their content protected by strong, modern cryptography.

## How the Security Works

The security of this application is centered around a single master password, but it never stores this password. Instead, it uses a robust cryptographic process for every note:

1.  **Key Derivation**: When you save a note, a new **random salt** is generated. The **PBKDF2** algorithm takes your master password and this unique salt to derive a strong, unique 256-bit symmetric key. This process is intentionally slow to resist brute-force attacks.
2.  **Authenticated Encryption**: The note's body is encrypted using **AES-256-GCM**. AES-GCM is a modern, authenticated encryption mode that provides both **confidentiality** (the data is unreadable) and **integrity** (the data cannot be secretly modified). A new random **nonce (IV)** is generated for every encryption operation.
3.  **Storage**: The final JSON file for each note stores the encrypted body, the public salt used for key derivation, and the public nonce used for encryption (appeded with body). The master password itself is never saved.



---

## Security Considerations

This section details the strengths and weaknesses of the application's security design.

### Strengths üí™

* **Key Derivation (PBKDF2)**: We use the Password-Based Key Derivation Function 2 (PBKDF2) with a high iteration count. This makes offline brute-force attacks against a stolen note file extremely slow and computationally expensive for an attacker.
* **Per-Note Salting**: Every note uses a unique random salt. This is a critical feature. It means that even if an attacker had a massive database of pre-computed password hashes (a rainbow table), it would be useless. It also ensures that cracking the key for one note provides no help in cracking any other note.
* **Authenticated Encryption (AES-GCM)**: Using AES-GCM is a major strength. It not only encrypts your data but also generates an **authentication tag**. If a stored note file is tampered with (even a single bit is flipped), the tag will not match during decryption, and the operation will fail. This protects you from undetected data corruption or malicious modification.
* **No Stored Secrets**: The master password only ever exists in the application's memory while it is running. It is never written to disk, not even in a hashed form.

### Weaknesses & Limitations ‚ö†Ô∏è

* **Master Password is a Single Point of Failure**: The security of your entire note vault depends on the strength of your one master password. If your password is weak (e.g., "password123"), the strong cryptography used elsewhere can be easily bypassed through guessing. **You are responsible for choosing a strong, high-entropy password.**
* **Metadata Leakage**: This application **does not encrypt metadata**. An attacker with access to your `vault` folder can see:
    * The number of notes you have.
    * The unique ID of each note (`guid.json`).
    * The unencrypted title of each note.
    * The creation and last modification timestamps of each note.
* **In-Memory Threats**: While the application is running, the derived encryption key and the decrypted plaintext of a note exist in the computer's RAM. An attacker with administrative access to your machine or sophisticated malware could potentially dump the application's memory and steal this information.

---

## Threat Model

This model outlines potential threats and how the application mitigates them.

### Threat 1: Offline Attack (Stolen Laptop/Drive)
* **Scenario**: An attacker steals your laptop or gets a copy of your `vault` folder.
* **Goal**: Read the content of your secure notes.
* **Mitigation**: This is the primary threat the application is designed to counter. The attacker has the ciphertext, salt, and nonce, but not the master password. To decrypt a note, they must brute-force the password. The use of **PBKDF2** with a high iteration count makes each password guess take a significant amount of time, rendering the attack impractical for any reasonably strong password.

### Threat 2: Data Tampering
* **Scenario**: An attacker gains temporary access to your files and modifies the `Body` of a stored `.json` note file.
* **Goal**: Change the content of a note without your knowledge (e.g., changing a bank account number).
* **Mitigation**: The **authentication tag** generated by AES-GCM protects against this. When you try to read the note, the decryption process will fail because the authentication tag will no longer be valid for the altered ciphertext. The application will raise an error, alerting you to the fact the data has been tampered with.

### Threat 3: Information Disclosure via Metadata
* **Scenario**: An attacker views your file system.
* **Goal**: Learn *about* your activities without reading the notes themselves (e.g., see that you created a note titled "Secret Project Plans" at 2 AM).
* **Mitigation**: **None.** This is a known limitation. The titles and timestamps of notes are not encrypted. Users should not put sensitive information in note titles.

### Threat 4: In-Memory Attack (Active Malware)
* **Scenario**: Your computer is infected with malware that can read application memory while SecureNotes is running.
* **Goal**: Steal the master password or the plaintext of a note you are currently viewing.
* **Mitigation**: **Partial, but Actively Hardened.** The application actively mitigates this threat by zeroing out sensitive data from memory as soon as it's no longer needed. The derived symmetric key is cleared using `Array.Clear()` within a `finally` block, ensuring the key is wiped even if an error occurs during encryption or decryption.

    This practice **significantly reduces the time window** in which sensitive keys are exposed in RAM. However, it does not offer complete protection. An attacker with sufficient privileges could still perform a memory dump during the brief moment a cryptographic operation is active. Therefore, the primary defense remains maintaining a secure and malware-free operating environment.