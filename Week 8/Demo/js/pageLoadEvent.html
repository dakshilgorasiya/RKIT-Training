<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script defer>
      console.log("Script starts executing");
      console.log("Before loaded", document.readyState);

      // Simulate long task
      const start = Date.now();
      while (Date.now() - start < 3000) {
        // busy wait for 3 seconds
      }

      console.log("Script finished executing");
    </script>
  </head>
  <body>
    <div>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsa cumque
        fugiat, aperiam ducimus recusandae doloribus eaque impedit soluta
        molestias praesentium eveniet veniam labore, deserunt nobis animi hic ab
        illo aliquid.
      </p>
    </div>
    <div>
      <img
        src="https://play-lh.googleusercontent.com/rfWOJQVBHoAZ_B43v0ySFlLmJBLtksVGAxGaFRh2ex4nOmNQ86qzG4sYWV63IKrXlvI=w240-h480-rw"
        alt=""
      />
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
      window.addEventListener("DOMContentLoaded", (e) => {
        console.log("dom is build image may be loading");
      });

      window.addEventListener("load", (e) => {
        console.log("all resources finished loading!");
      });

      document.addEventListener("readystatechange", (e) => {
        console.log("ready state changed:", document.readyState);
      });

      window.addEventListener("beforeonload", (e) => {
        console.log("page is loading");
      });
    </script>
  </body>
</html>
